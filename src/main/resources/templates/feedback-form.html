<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Submit Feedback</title>-->
<!--    <style>-->
<!--        /* Reset and base styles */-->
<!--        * {-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            box-sizing: border-box;-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--        }-->

<!--        body {-->
<!--            background-color: #f8fafc;-->
<!--            min-height: 100vh;-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            padding: 20px;-->
<!--        }-->

<!--        /* Container styles */-->
<!--        .container {-->
<!--            width: 100%;-->
<!--            max-width: 500px;-->
<!--            margin: 0 auto;-->
<!--        }-->

<!--        /* Card styles */-->
<!--        .card {-->
<!--            background-color: white;-->
<!--            border-radius: 12px;-->
<!--            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);-->
<!--            overflow: hidden;-->
<!--            transition: all 0.3s ease;-->
<!--            display: none;-->
<!--        }-->

<!--        /* Header styles with gradient */-->
<!--        .card-header {-->
<!--            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);-->
<!--            color: white;-->
<!--            padding: 24px;-->
<!--            text-align: center;-->
<!--            position: relative;-->
<!--            overflow: hidden;-->
<!--        }-->

<!--        .card-header::before {-->
<!--            content: '';-->
<!--            position: absolute;-->
<!--            top: 0;-->
<!--            left: -100%;-->
<!--            width: 100%;-->
<!--            height: 100%;-->
<!--            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);-->
<!--            transition: left 0.5s;-->
<!--        }-->

<!--        .card-header:hover::before {-->
<!--            left: 100%;-->
<!--        }-->

<!--        .card-header h1 {-->
<!--            font-size: 24px;-->
<!--            margin-bottom: 8px;-->
<!--            font-weight: 700;-->
<!--            position: relative;-->
<!--            z-index: 1;-->
<!--        }-->

<!--        .card-header p {-->
<!--            font-size: 14px;-->
<!--            opacity: 0.9;-->
<!--            position: relative;-->
<!--            z-index: 1;-->
<!--        }-->

<!--        /* Greeting message styles */-->
<!--        .greeting-message {-->
<!--            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);-->
<!--            color: white;-->
<!--            padding: 16px 24px;-->
<!--            font-size: 14px;-->
<!--            line-height: 1.5;-->
<!--        }-->

<!--        .greeting-message .bold {-->
<!--            font-weight: 700;-->
<!--            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);-->
<!--        }-->

<!--        /* Content styles */-->
<!--        .card-content {-->
<!--            padding: 24px;-->
<!--        }-->

<!--        /* Form styles */-->
<!--        .form-group {-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .form-group label {-->
<!--            display: block;-->
<!--            margin-bottom: 8px;-->
<!--            font-size: 14px;-->
<!--            font-weight: 500;-->
<!--            color: #374151;-->
<!--        }-->

<!--        .form-group textarea {-->
<!--            width: 100%;-->
<!--            min-height: 150px;-->
<!--            padding: 12px 16px;-->
<!--            border: 2px solid #e5e7eb;-->
<!--            border-radius: 8px;-->
<!--            font-size: 16px;-->
<!--            resize: vertical;-->
<!--            transition: border-color 0.2s ease;-->
<!--            font-family: inherit;-->
<!--        }-->

<!--        .form-group textarea:focus {-->
<!--            outline: none;-->
<!--            border-color: #667eea;-->
<!--            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);-->
<!--        }-->

<!--        .form-group textarea.error {-->
<!--            border-color: #ef4444;-->
<!--        }-->

<!--        .form-group textarea.error:focus {-->
<!--            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);-->
<!--        }-->

<!--        .character-count {-->
<!--            display: flex;-->
<!--            justify-content: space-between;-->
<!--            align-items: center;-->
<!--            margin-top: 8px;-->
<!--            font-size: 14px;-->
<!--        }-->

<!--        .count {-->
<!--            color: #6b7280;-->
<!--        }-->

<!--        .count.error {-->
<!--            color: #ef4444;-->
<!--            font-weight: 500;-->
<!--        }-->

<!--        .error-message {-->
<!--            color: #ef4444;-->
<!--            font-size: 14px;-->
<!--            margin-top: 4px;-->
<!--            opacity: 0;-->
<!--            transition: opacity 0.3s ease;-->
<!--        }-->

<!--        .error-message.visible {-->
<!--            opacity: 1;-->
<!--        }-->

<!--        /* Hidden inputs */-->
<!--        .hidden-inputs {-->
<!--            display: none;-->
<!--        }-->

<!--        /* Button styles */-->
<!--        .submit-btn {-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            width: 100%;-->
<!--            padding: 12px;-->
<!--            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);-->
<!--            color: white;-->
<!--            border: none;-->
<!--            border-radius: 8px;-->
<!--            font-size: 16px;-->
<!--            font-weight: 500;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.2s ease;-->
<!--        }-->

<!--        .submit-btn:hover {-->
<!--            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);-->
<!--            transform: translateY(-1px);-->
<!--        }-->

<!--        .submit-btn:disabled {-->
<!--            opacity: 0.7;-->
<!--            cursor: not-allowed;-->
<!--            transform: none;-->
<!--        }-->

<!--        .spinner {-->
<!--            display: none;-->
<!--            width: 16px;-->
<!--            height: 16px;-->
<!--            border: 2px solid rgba(255, 255, 255, 0.3);-->
<!--            border-radius: 50%;-->
<!--            border-top-color: white;-->
<!--            animation: spin 0.8s linear infinite;-->
<!--            margin-left: 8px;-->
<!--        }-->

<!--        @keyframes spin {-->
<!--            to {-->
<!--                transform: rotate(360deg);-->
<!--            }-->
<!--        }-->

<!--        /* Success message styles */-->
<!--        .success-card {-->
<!--            display: none;-->
<!--            text-align: center;-->
<!--            padding: 32px 24px;-->
<!--            animation: fadeIn 0.5s ease;-->
<!--            background-color: white;-->
<!--            border-radius: 12px;-->
<!--            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);-->
<!--        }-->

<!--        @keyframes fadeIn {-->
<!--            from {-->
<!--                opacity: 0;-->
<!--                transform: scale(0.9);-->
<!--            }-->
<!--            to {-->
<!--                opacity: 1;-->
<!--                transform: scale(1);-->
<!--            }-->
<!--        }-->

<!--        .success-icon {-->
<!--            display: inline-flex;-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            width: 72px;-->
<!--            height: 72px;-->
<!--            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);-->
<!--            border-radius: 50%;-->
<!--            margin-bottom: 24px;-->
<!--            animation: scaleIn 0.5s ease 0.2s both;-->
<!--        }-->

<!--        @keyframes scaleIn {-->
<!--            from {-->
<!--                transform: scale(0);-->
<!--            }-->
<!--            to {-->
<!--                transform: scale(1);-->
<!--            }-->
<!--        }-->

<!--        .success-icon svg {-->
<!--            width: 40px;-->
<!--            height: 40px;-->
<!--            color: white;-->
<!--        }-->

<!--        .success-title {-->
<!--            font-size: 24px;-->
<!--            font-weight: 700;-->
<!--            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);-->
<!--            -webkit-background-clip: text;-->
<!--            -webkit-text-fill-color: transparent;-->
<!--            background-clip: text;-->
<!--            margin-bottom: 8px;-->
<!--        }-->

<!--        .success-message {-->
<!--            color: #6b7280;-->
<!--            margin-bottom: 24px;-->
<!--        }-->

<!--        /* Invalid message styles */-->
<!--        .invalid-message {-->
<!--            display: none;-->
<!--            text-align: center;-->
<!--            padding: 32px 24px;-->
<!--            background-color: white;-->
<!--            border-radius: 12px;-->
<!--            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);-->
<!--        }-->

<!--        .invalid-title {-->
<!--            font-size: 24px;-->
<!--            font-weight: 700;-->
<!--            color: #ef4444;-->
<!--            margin-bottom: 8px;-->
<!--        }-->

<!--        .invalid-text {-->
<!--            color: #6b7280;-->
<!--        }-->

<!--        /* Responsive adjustments */-->
<!--        @media (max-width: 480px) {-->
<!--            .card-header {-->
<!--                padding: 20px;-->
<!--            }-->

<!--            .card-content {-->
<!--                padding: 20px;-->
<!--            }-->

<!--            .greeting-message {-->
<!--                padding: 12px 20px;-->
<!--                font-size: 13px;-->
<!--            }-->

<!--            .form-group textarea {-->
<!--                font-size: 14px;-->
<!--            }-->
<!--        }-->

<!--        /* Error shake animation */-->
<!--        @keyframes shake {-->
<!--            0%, 100% {-->
<!--                transform: translateX(0);-->
<!--            }-->
<!--            10%, 30%, 50%, 70%, 90% {-->
<!--                transform: translateX(-5px);-->
<!--            }-->
<!--            20%, 40%, 60%, 80% {-->
<!--                transform: translateX(5px);-->
<!--            }-->
<!--        }-->

<!--        .shake {-->
<!--            animation: shake 0.6s cubic-bezier(.36,.07,.19,.97) both;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container">-->
<!--    &lt;!&ndash; Feedback Form Card &ndash;&gt;-->
<!--    <div class="card" id="formContainer">-->
<!--        <div class="card-header">-->
<!--            <h1>Submit Your Feedback</h1>-->
<!--            <p>We appreciate your business and value your opinion</p>-->
<!--        </div>-->
<!--        <div class="greeting-message" id="greetingMessage"></div>-->
<!--        <div class="card-content">-->
<!--            <form id="feedbackForm">-->
<!--                &lt;!&ndash; Hidden inputs for sending metadata &ndash;&gt;-->
<!--                <div class="hidden-inputs">-->
<!--                    <input type="hidden" id="ratingInput" name="rating">-->
<!--                    <input type="hidden" id="firstNameInput" name="firstName">-->
<!--                    <input type="hidden" id="lastNameInput" name="lastName">-->
<!--                    <input type="hidden" id="emailInput" name="email">-->
<!--                </div>-->

<!--                <div class="form-group">-->
<!--                    <label for="feedback">Tell us more about your experience:</label>-->
<!--                    <textarea-->
<!--                            id="feedback"-->
<!--                            name="feedback"-->
<!--                            placeholder="Please share any additional comments, suggestions, or details about your experience with us..."-->
<!--                    ></textarea>-->
<!--                    <div class="character-count">-->
<!--                        <span class="count" id="characterCount">0 / 500 characters</span>-->
<!--                        <span class="error-message" id="errorMessage"></span>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <button type="submit" class="submit-btn" id="submitBtn">-->
<!--                    Submit-->
<!--                    <span class="spinner" id="spinner"></span>-->
<!--                </button>-->
<!--            </form>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Success Card - Only shows after successful API submission &ndash;&gt;-->
<!--    <div class="success-card" id="successCard">-->
<!--        <div class="success-icon">-->
<!--            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">-->
<!--                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />-->
<!--            </svg>-->
<!--        </div>-->
<!--        <h2 class="success-title">Thank You!</h2>-->
<!--        <p class="success-message">We appreciate your feedback. Your input helps us improve our services and provide better experiences for all our customers.</p>-->
<!--    </div>-->

<!--    &lt;!&ndash; Invalid Message &ndash;&gt;-->
<!--    <div class="invalid-message" id="invalidMessage">-->
<!--        <h2 class="invalid-title">Invalid Access</h2>-->
<!--        <p class="invalid-text">This feedback form requires valid parameters to access. Please use the proper link provided to you.</p>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--    // Get URL parameters-->
<!--    const params = new URLSearchParams(window.location.search);-->
<!--    const rating = params.get('rating');-->
<!--    const firstName = params.get('firstName') || '';-->
<!--    const lastName = params.get('lastName') || '';-->
<!--    const email = params.get('email') || '';-->

<!--    // DOM Elements-->
<!--    const formContainer = document.getElementById('formContainer');-->
<!--    const invalidMessage = document.getElementById('invalidMessage');-->
<!--    const greetingMessage = document.getElementById('greetingMessage');-->
<!--    const feedbackForm = document.getElementById('feedbackForm');-->
<!--    const feedbackTextarea = document.getElementById('feedback');-->
<!--    const characterCountElement = document.getElementById('characterCount');-->
<!--    const errorMessageElement = document.getElementById('errorMessage');-->
<!--    const submitBtn = document.getElementById('submitBtn');-->
<!--    const spinner = document.getElementById('spinner');-->
<!--    const successCard = document.getElementById('successCard');-->

<!--    // Constants-->
<!--    const MAX_CHARACTERS = 500;-->

<!--    // Initialize the form based on URL parameters-->
<!--    function initializeForm() {-->
<!--        if (rating && parseInt(rating) > 0) {-->
<!--            // Set hidden input values-->
<!--            document.getElementById('ratingInput').value = rating;-->
<!--            document.getElementById('firstNameInput').value = firstName;-->
<!--            document.getElementById('lastNameInput').value = lastName;-->
<!--            document.getElementById('emailInput').value = email;-->

<!--            // Set greeting message with bold styling-->
<!--            greetingMessage.innerHTML = `Hi <span class="bold">${firstName} ${lastName}</span> (<span class="bold">${email}</span>), you rated us <span class="bold">${rating} star${rating > 1 ? 's' : ''}</span>. If you want to leave a comment, type it below and click Submit. If not, just click Submit.`;-->

<!--            // Show the form-->
<!--            formContainer.style.display = 'block';-->
<!--        } else {-->
<!--            // Show invalid message-->
<!--            invalidMessage.style.display = 'block';-->
<!--        }-->
<!--    }-->

<!--    // Event Listeners-->
<!--    feedbackTextarea.addEventListener('input', handleTextareaInput);-->
<!--    feedbackForm.addEventListener('submit', handleFormSubmit);-->

<!--    // Functions-->
<!--    function handleTextareaInput() {-->
<!--        const text = feedbackTextarea.value;-->
<!--        const characterCount = text.length;-->

<!--        // Update character count-->
<!--        characterCountElement.textContent = `${characterCount} / ${MAX_CHARACTERS} characters`;-->

<!--        // Check if character count exceeds limit-->
<!--        if (characterCount > MAX_CHARACTERS) {-->
<!--            characterCountElement.classList.add('error');-->
<!--            feedbackTextarea.classList.add('error');-->
<!--            showError(`Please limit your feedback to ${MAX_CHARACTERS} characters.`);-->
<!--            submitBtn.disabled = true;-->
<!--        } else {-->
<!--            characterCountElement.classList.remove('error');-->
<!--            feedbackTextarea.classList.remove('error');-->
<!--            hideError();-->
<!--            submitBtn.disabled = false;-->
<!--        }-->
<!--    }-->

<!--    async function handleFormSubmit(event) {-->
<!--        event.preventDefault();-->

<!--        const text = feedbackTextarea.value;-->
<!--        const characterCount = text.length;-->

<!--        // Validate character count-->
<!--        if (characterCount > MAX_CHARACTERS) {-->
<!--            showError(`Please limit your feedback to ${MAX_CHARACTERS} characters.`);-->
<!--            shakeElement(feedbackTextarea);-->
<!--            return;-->
<!--        }-->

<!--        // Show loading state-->
<!--        submitBtn.disabled = true;-->
<!--        spinner.style.display = 'block';-->
<!--        submitBtn.innerHTML = 'Submitting <span class="spinner" style="display: inline-block; margin-left: 8px; width: 16px; height: 16px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 50%; border-top-color: white; animation: spin 0.8s linear infinite;"></span>';-->

<!--        try {-->
<!--            // Prepare form data-->
<!--            const formData = new FormData();-->
<!--            formData.append('rating', document.getElementById('ratingInput').value);-->
<!--            formData.append('firstName', document.getElementById('firstNameInput').value);-->
<!--            formData.append('lastName', document.getElementById('lastNameInput').value);-->
<!--            formData.append('email', document.getElementById('emailInput').value);-->
<!--            formData.append('feedback', text);-->

<!--            // Submit to API-->
<!--            const response = await fetch('/api/submit-feedback', {-->
<!--                method: 'POST',-->
<!--                body: formData-->
<!--            });-->

<!--            if (response.ok) {-->
<!--                // Success: Hide form and show success message-->
<!--                formContainer.style.display = 'none';-->
<!--                successCard.style.display = 'block';-->
<!--            } else {-->
<!--                // API returned an error status-->
<!--                const errorData = await response.text();-->
<!--                throw new Error(`Server error: ${response.status}`);-->
<!--            }-->

<!--        } catch (error) {-->
<!--            // Error: Reset button state and show error-->
<!--            console.error('Submission error:', error);-->
<!--            submitBtn.disabled = false;-->
<!--            spinner.style.display = 'none';-->
<!--            submitBtn.innerHTML = 'Submit';-->
<!--            showError('Something went wrong. Please try again.');-->
<!--            shakeElement(feedbackForm);-->
<!--        }-->
<!--    }-->

<!--    function showError(message) {-->
<!--        errorMessageElement.textContent = message;-->
<!--        errorMessageElement.classList.add('visible');-->
<!--    }-->

<!--    function hideError() {-->
<!--        errorMessageElement.classList.remove('visible');-->
<!--    }-->

<!--    function shakeElement(element) {-->
<!--        element.classList.add('shake');-->
<!--        setTimeout(() => {-->
<!--            element.classList.remove('shake');-->
<!--        }, 600);-->
<!--    }-->

<!--    // Initialize the form when the page loads-->
<!--    initializeForm();-->
<!--</script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit Feedback</title>
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f8fafc;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        /* Container styles */
        .container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }

        /* Card styles */
        .card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: all 0.3s ease;
            display: none;
        }

        /* Header styles with gradient */
        .card-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 24px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .card-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .card-header:hover::before {
            left: 100%;
        }

        .card-header h1 {
            font-size: 24px;
            margin-bottom: 8px;
            font-weight: 700;
            position: relative;
            z-index: 1;
        }

        .card-header p {
            font-size: 14px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        /* Greeting message styles */
        .greeting-message {
            background: #f8fafc;
            color: black;
            padding: 16px 24px;
            font-size: 14px;
            line-height: 1.5;
        }

        .greeting-message .bold {
            font-weight: 700;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* Content styles */
        .card-content {
            padding: 24px;
        }

        /* Form styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
            color: #374151;
        }

        .form-group textarea {
            width: 100%;
            min-height: 150px;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            resize: vertical;
            transition: border-color 0.2s ease;
            font-family: inherit;
        }

        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-group textarea.error {
            border-color: #ef4444;
        }

        .form-group textarea.error:focus {
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        .character-count {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            font-size: 14px;
        }

        .count {
            color: #6b7280;
        }

        .count.error {
            color: #ef4444;
            font-weight: 500;
        }

        .error-message {
            color: #ef4444;
            font-size: 14px;
            margin-top: 4px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .error-message.visible {
            opacity: 1;
        }

        /* Hidden inputs */
        .hidden-inputs {
            display: none;
        }

        /* Button styles */
        .submit-btn {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .submit-btn:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
            transform: translateY(-1px);
        }

        .submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .spinner {
            display: none;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
            margin-left: 8px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Success message styles */
        .success-card {
            display: none;
            text-align: center;
            padding: 32px 24px;
            animation: fadeIn 0.5s ease;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .success-icon {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 72px;
            height: 72px;
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            border-radius: 50%;
            margin-bottom: 24px;
            animation: scaleIn 0.5s ease 0.2s both;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0);
            }
            to {
                transform: scale(1);
            }
        }

        .success-icon svg {
            width: 40px;
            height: 40px;
            color: white;
        }

        .success-title {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .success-message {
            color: #6b7280;
            margin-bottom: 24px;
        }

        /* Invalid message styles */
        .invalid-message {
            display: none;
            text-align: center;
            padding: 32px 24px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .invalid-title {
            font-size: 24px;
            font-weight: 700;
            color: #ef4444;
            margin-bottom: 8px;
        }

        .invalid-text {
            color: #6b7280;
        }

        /* Responsive adjustments */
        @media (max-width: 480px) {
            .card-header {
                padding: 20px;
            }

            .card-content {
                padding: 20px;
            }

            .greeting-message {
                padding: 12px 20px;
                font-size: 13px;
            }

            .form-group textarea {
                font-size: 14px;
            }
        }

        /* Error shake animation */
        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            10%, 30%, 50%, 70%, 90% {
                transform: translateX(-5px);
            }
            20%, 40%, 60%, 80% {
                transform: translateX(5px);
            }
        }

        .shake {
            animation: shake 0.6s cubic-bezier(.36,.07,.19,.97) both;
        }
    </style>
</head>
<body>
<div class="container">
    <!-- Feedback Form Card -->
    <div class="card" id="formContainer">
        <div class="card-header">
            <h1>Submit Your Feedback</h1>
            <p>We appreciate your business and value your opinion</p>
        </div>
        <div class="greeting-message" id="greetingMessage"></div>
        <div class="card-content">
            <form id="feedbackForm">
                <!-- Hidden inputs for sending metadata -->
                <div class="hidden-inputs">
                    <input type="hidden" id="ratingInput" name="rating">
                    <input type="hidden" id="firstNameInput" name="firstName">
                    <input type="hidden" id="lastNameInput" name="lastName">
                    <input type="hidden" id="emailInput" name="email">
                </div>

                <div class="form-group">
                    <label for="feedback">Tell us more about your experience:</label>
                    <textarea
                            id="feedback"
                            name="feedback"
                            placeholder="Please share any additional comments, suggestions, or details about your experience with us..."
                    ></textarea>
                    <div class="character-count">
                        <span class="count" id="characterCount">0 / 500 characters</span>
                        <span class="error-message" id="errorMessage"></span>
                    </div>
                </div>
                <button type="submit" class="submit-btn" id="submitBtn">
                    Submit
                    <span class="spinner" id="spinner"></span>
                </button>
            </form>
        </div>
    </div>

    <!-- Success Card - Only shows after successful API submission -->
    <div class="success-card" id="successCard">
        <div class="success-icon">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
        </div>
        <h2 class="success-title">Thank You!</h2>
        <p class="success-message">We appreciate your feedback. Your input helps us improve our services and provide better experiences for all our customers.</p>
    </div>

    <!-- Invalid Message -->
    <div class="invalid-message" id="invalidMessage">
        <h2 class="invalid-title">Invalid Access</h2>
        <p class="invalid-text">This feedback form requires valid parameters to access. Please use the proper link provided to you.</p>
    </div>
</div>

<script>
    // Get URL parameters
    const params = new URLSearchParams(window.location.search);
    const rating = params.get('rating');
    const firstName = params.get('firstName') || '';
    const lastName = params.get('lastName') || '';
    const email = params.get('email') || '';

    // DOM Elements
    const formContainer = document.getElementById('formContainer');
    const invalidMessage = document.getElementById('invalidMessage');
    const greetingMessage = document.getElementById('greetingMessage');
    const feedbackForm = document.getElementById('feedbackForm');
    const feedbackTextarea = document.getElementById('feedback');
    const characterCountElement = document.getElementById('characterCount');
    const errorMessageElement = document.getElementById('errorMessage');
    const submitBtn = document.getElementById('submitBtn');
    const spinner = document.getElementById('spinner');
    const successCard = document.getElementById('successCard');

    // Constants
    const MAX_CHARACTERS = 500;

    // Initialize the form based on URL parameters
    function initializeForm() {
        if (rating && parseInt(rating) > 0) {
            // Set hidden input values
            document.getElementById('ratingInput').value = rating;
            document.getElementById('firstNameInput').value = firstName;
            document.getElementById('lastNameInput').value = lastName;
            document.getElementById('emailInput').value = email;

            // Set greeting message with bold styling
      greetingMessage.innerHTML = `Dear Mr/Mrs <span class="bold">${firstName} ${lastName}</span> (<span class="bold">${email}</span>), thanks for the <span class="bold">${rating}-star</span> rating! You can add a comment below before clicking <span class="bold">Submit</span>.`;




            // Show the form
            formContainer.style.display = 'block';
        } else {
            // Show invalid message
            invalidMessage.style.display = 'block';
        }
    }

    // Event Listeners
    feedbackTextarea.addEventListener('input', handleTextareaInput);
    feedbackForm.addEventListener('submit', handleFormSubmit);

    // Functions
    function handleTextareaInput() {
        const text = feedbackTextarea.value;
        const characterCount = text.length;

        // Update character count
        characterCountElement.textContent = `${characterCount} / ${MAX_CHARACTERS} characters`;

        // Check if character count exceeds limit
        if (characterCount > MAX_CHARACTERS) {
            characterCountElement.classList.add('error');
            feedbackTextarea.classList.add('error');
            showError(`Please limit your feedback to ${MAX_CHARACTERS} characters.`);
            submitBtn.disabled = true;
        } else {
            characterCountElement.classList.remove('error');
            feedbackTextarea.classList.remove('error');
            hideError();
            submitBtn.disabled = false;
        }
    }

    async function handleFormSubmit(event) {
        event.preventDefault();

        const text = feedbackTextarea.value;
        const characterCount = text.length;

        // Validate character count
        if (characterCount > MAX_CHARACTERS) {
            showError(`Please limit your feedback to ${MAX_CHARACTERS} characters.`);
            shakeElement(feedbackTextarea);
            return;
        }

        // Show loading state
        submitBtn.disabled = true;
        spinner.style.display = 'block';
        submitBtn.innerHTML = 'Submitting <span class="spinner" style="display: inline-block; margin-left: 8px; width: 16px; height: 16px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 50%; border-top-color: white; animation: spin 0.8s linear infinite;"></span>';

        try {
            // Prepare form data
            const formData = new FormData();
            formData.append('rating', document.getElementById('ratingInput').value);
            formData.append('firstName', document.getElementById('firstNameInput').value);
            formData.append('lastName', document.getElementById('lastNameInput').value);
            formData.append('email', document.getElementById('emailInput').value);
            formData.append('feedback', text);

            // Submit to API
            const response = await fetch('https://emailthings-production.up.railway.app/api/submit-feedback', {
                method: 'POST',
                body: formData
            });

            if (response.ok) {
                // Success: Hide form and show success message
                formContainer.style.display = 'none';
                successCard.style.display = 'block';
            } else {
                // API returned an error status
                const errorData = await response.text();
                throw new Error(`Server error: ${response.status}`);
            }

        } catch (error) {
            // Error: Reset button state and show error
            console.error('Submission error:', error);
            submitBtn.disabled = false;
            spinner.style.display = 'none';
            submitBtn.innerHTML = 'Submit';
            showError('Something went wrong. Please try again.');
            shakeElement(feedbackForm);
        }
    }

    function showError(message) {
        errorMessageElement.textContent = message;
        errorMessageElement.classList.add('visible');
    }

    function hideError() {
        errorMessageElement.classList.remove('visible');
    }

    function shakeElement(element) {
        element.classList.add('shake');
        setTimeout(() => {
            element.classList.remove('shake');
        }, 600);
    }

    // Initialize the form when the page loads
    initializeForm();
</script>
</body>
</html>